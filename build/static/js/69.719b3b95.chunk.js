(this["webpackJsonpmentor-lead"]=this["webpackJsonpmentor-lead"]||[]).push([[69],{1249:function(e,t,a){"use strict";a.r(t);var n=a(37),c=a(49),r=a(14),i=a(7),l=a(184),s=a(83),d=a(1),o=a(34),j=a.n(o),b=a(586),h=a(709),O=a(570),u=a(1222),m=a(1220),g=a(567),x=a.n(g),p=a(864),f=a.n(p),v=a(863),y=a.n(v),k=a(571),D=a(297),L=a(572),S=a(573),A=a(574),C=a(575),w=a(613),I=a(556),N=a(82),z=a(501),B=a(2),T=function(e){var t=e.handleClose,a=new Date,n=a.setDate(a.getDate()+0),c=new Date(n).toISOString().split("T")[0],i=Object(d.useState)([]),l=Object(r.a)(i,2),s=(l[0],l[1]),o=Object(d.useState)([]),O=Object(r.a)(o,2),m=(O[0],O[1]),g=Object(d.useState)(c),x=Object(r.a)(g,2),p=x[0],f=x[1],v=localStorage.getItem("branchName");Object(d.useEffect)((function(){j.a.get(N.b+"/getOrganization").then((function(e){for(var t=[],a=0;a<e.data.length;a++)t.push({label:e.data[a].name,id:e.data[a]._id});s(t)})),j.a.get(N.b+"/getEmployee").then((function(e){for(var t=[],a=0;a<e.data.length;a++)t.push({label:e.data[a].firstName,last:e.data[a].lastName,id:e.data[a]._id});m(t)}))}),[]);var y=localStorage.getItem("org"),k=localStorage.getItem("name"),D=new Date;return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("form",{children:[Object(B.jsxs)(b.a,{children:[Object(B.jsxs)(h.a,{md:"6",children:[Object(B.jsx)(u.a.Label,{children:"Oraganization"}),Object(B.jsx)(u.a.Control,{placeholder:"Enter the Organization Name",required:!0,disabled:!0,value:v})]}),Object(B.jsxs)(h.a,{className:"mt-1",md:"6",children:[Object(B.jsx)(u.a.Label,{children:"Employee Name"}),Object(B.jsx)(u.a.Control,{required:!0,disabled:!0,placeholder:"Enter the Employee Name",value:k})]})]}),Object(B.jsx)(b.a,{children:Object(B.jsxs)(h.a,{className:"mt-1",md:"6",children:[Object(B.jsx)(u.a.Label,{children:"Date"}),Object(B.jsx)(u.a.Control,{type:"date",required:!0,disabled:!0,value:p,onChange:function(e){return f(e.target.value)}})]})})]}),Object(B.jsx)("br",{}),Object(B.jsxs)("div",{style:{textAlign:"right"},children:[Object(B.jsx)(z.a,{onClick:function(){t()},variant:"contained",children:"Cancel"}),"\xa0",Object(B.jsx)(z.a,{variant:"contained",color:"success",onClick:function(){var e=k.split(" "),a=e[0],n=e[1],c=new Date,r=c.getHours(),i=c.getMinutes();if("I Tech Mentor"==y)if(10===r&&i>=15||11===r&&0===i){var l={fname:a,lname:n,date:p,checkInTime:D,attendence:3,isApproved:"Waiting",isDeleted:0,disableLogout:0,organization:v,createdBy:k};j.a.post(N.b+"/saveAttendence",l)}else if(r>11&&r<16){var s={fname:a,lname:n,date:p,checkInTime:D,attendence:2,isApproved:"Waiting",isDeleted:0,disableLogout:0,organization:v,createdBy:k};j.a.post(N.b+"/saveAttendence",s)}else{var d={fname:a,lname:n,date:p,checkInTime:D,attendence:1,isApproved:"Waiting",isDeleted:0,disableLogout:0,organization:v,createdBy:k};j.a.post(N.b+"/saveAttendence",d)}else if(9===r&&i>=15||10===r&&0===i){var o={fname:a,lname:n,date:p,checkInTime:D,attendence:3,isApproved:"Waiting",isDeleted:0,disableLogout:0,organization:v,createdBy:k};j.a.post(N.b+"/saveAttendence",o)}else if(r>10&&r<16){var b={fname:a,lname:n,date:p,checkInTime:D,attendence:2,isApproved:"Waiting",isDeleted:0,disableLogout:0,organization:v,createdBy:k};j.a.post(N.b+"/saveAttendence",b)}else{var h={fname:a,lname:n,date:p,checkInTime:D,attendence:1,isApproved:"Waiting",isDeleted:0,disableLogout:0,organization:v,createdBy:k};j.a.post(N.b+"/saveAttendence",h)}t()},children:"Check In"})]})]})},E=a(861),M=a.n(E),H=function(e){var t=e.thelogoutData,a=e.handleClose,n=Object(d.useState)(t.organization),c=Object(r.a)(n,2),i=c[0],l=(c[1],Object(d.useState)(t.fname+" "+t.lname)),s=Object(r.a)(l,2),o=s[0];s[1];return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("form",{children:[Object(B.jsxs)(b.a,{children:[Object(B.jsxs)(h.a,{md:"6",children:[Object(B.jsx)(u.a.Label,{children:"Oraganization"}),Object(B.jsx)(u.a.Control,{required:!0,disabled:!0,placeholder:"Enter the Organization Name",value:i})]}),Object(B.jsxs)(h.a,{className:"mt-1",md:"6",children:[Object(B.jsx)(u.a.Label,{children:"Employee Name"}),Object(B.jsx)(u.a.Control,{required:!0,disabled:!0,placeholder:"Enter the Employee Name",value:o})]})]}),Object(B.jsxs)(b.a,{children:[Object(B.jsxs)(h.a,{className:"mt-1",md:"6",children:[Object(B.jsx)(u.a.Label,{children:"Date"}),Object(B.jsx)(u.a.Control,{required:!0,disabled:!0,value:new Date(t.date).toLocaleDateString("en-GB")})]}),Object(B.jsxs)(h.a,{className:"mt-1",md:"6",children:[Object(B.jsx)(u.a.Label,{children:"Check In Time"}),Object(B.jsx)(u.a.Control,{required:!0,disabled:!0,value:new Date(t.checkInTime).toLocaleTimeString("en-GB")})]})]})]}),Object(B.jsx)("br",{}),Object(B.jsx)("div",{style:{textAlign:"right"},children:Object(B.jsx)(z.a,{variant:"contained",color:"error",onClick:function(){var e=new Date,n=(new Date).getHours();if(M()(t.date).format("YYYY-MM-DD")!=M()(e).format("YYYY-MM-DD"))return alert("Sorry You can not Logout for Previous Day");if(n<16){var c={fname:t.fname,lname:t.lname,date:t.date,checkOut:e,disableLogout:1,attendence:2,organization:i};j.a.put(N.b+"/updateAttendence/"+t._id,c)}else{var r={fname:t.fname,lname:t.lname,date:t.date,checkOut:e,disableLogout:1,attendence:t.attendence,organization:i};j.a.put(N.b+"/updateAttendence/"+t._id,r)}a()},children:"Check Out"})})]})},Y=Object(l.a)("div")((function(e){var t,a=e.theme;return t={margin:"30px"},Object(i.a)(t,a.breakpoints.down("sm"),{margin:"16px"}),Object(i.a)(t,"& .breadcrumb",Object(i.a)({marginBottom:"30px"},a.breakpoints.down("sm"),{marginBottom:"16px"})),t})),W=Object(l.a)(k.a)((function(){return{whiteSpace:"pre","& thead":{"& tr":{"& th":{paddingLeft:0,paddingRight:0}}},"& tbody":{"& tr":{"& td":{paddingLeft:0}}}}}));t.default=function(){localStorage.getItem("accessToken");var e=localStorage.getItem("roleCode"),t=(localStorage.getItem("userId"),Object(d.useState)(null)),a=Object(r.a)(t,2),i=a[0],l=a[1],o=Object(d.useState)(!1),g=Object(r.a)(o,2),p=g[0],v=g[1],k=function(){return v(!1)},z=Object(d.useState)(!1),E=Object(r.a)(z,2),M=E[0],_=E[1],q=function(){return _(!1)},G=Object(d.useState)(""),P=Object(r.a)(G,2),V=P[0],F=P[1],R=localStorage.getItem("name").split(" "),J=Object(d.useState)([]),K=Object(r.a)(J,2),Q=K[0],U=K[1],X=Object(d.useState)(1),Z=Object(r.a)(X,2),$=Z[0],ee=(Z[1],Object(d.useState)(0)),te=Object(r.a)(ee,2),ae=(te[0],te[1]),ne=function(){var t=Object(c.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("EMP"!=e){t.next=5;break}return t.next=3,j.a.get(N.b+"/getAttendence?page=".concat($,"&fname=")+R[0]).then((function(e){U(e.data.data),ae(e.data.totalPages)}));case 3:t.next=7;break;case 5:return t.next=7,j.a.get(N.b+"/getAttendence?page=".concat($)).then((function(e){U(e.data.data),ae(e.data.totalPages)}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(d.useEffect)((function(){ne()}),[Q]),Object(B.jsxs)(Y,{children:[Object(B.jsxs)(D.a,{children:[Object(B.jsx)(D.a,{className:"breadcrumb",children:Object(B.jsx)(s.a,{routeSegments:[{name:"Manage Attandance",path:"/manageAttandance"},{name:"View Attandance Details"}]})}),Object(B.jsx)(D.a,{children:Object(B.jsx)(b.a,{children:Object(B.jsx)(h.a,{children:Object(B.jsxs)(O.a,{className:"mb-3",children:[Object(B.jsx)(u.a.Control,{placeholder:"Search By Attendence Date","aria-label":"Recipient's username","aria-describedby":"basic-addon2",value:V,onChange:function(e){return F(e.target.value)}})," \xa0",Object(B.jsx)("button",{type:"submit",className:"btn btn-success",onClick:function(){_(!0)},children:"LOG IN"})]})})})}),Object(B.jsxs)(D.a,{className:"text-center",width:"100%",overflow:"auto",children:[Object(B.jsx)("h4",{children:"Attendence Logs"}),Object(B.jsxs)(W,{className:"table table-striped table-bordered",style:{borderRadius:"1px"},children:[Object(B.jsx)(L.a,{style:{borderLeft:"1px solid red",borderRight:"1px solid red"},className:"text-center",children:Object(B.jsxs)(S.a,{children:[Object(B.jsx)(A.a,{align:"center",children:"Sr. No"}),Object(B.jsx)(A.a,{align:"center",children:"Organization"}),Object(B.jsx)(A.a,{align:"center",children:"Date"}),Object(B.jsx)(A.a,{align:"center",children:"Employee Name"}),Object(B.jsx)(A.a,{align:"center",children:"Check In Time"}),Object(B.jsx)(A.a,{align:"center",children:"Check Out Time"}),Object(B.jsx)(A.a,{align:"center",children:"Attendence"}),Object(B.jsx)(A.a,{align:"center",children:"Status"}),Object(B.jsx)(A.a,{align:"center",children:"Action"})]})}),Object(B.jsx)(C.a,{children:Q.map((function(e,t){return Object(B.jsxs)(S.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(B.jsxs)(A.a,{component:"th",scope:"row",children:["AL-",t+101]}),Object(B.jsx)(A.a,{align:"center",children:e.organization}),Object(B.jsx)(A.a,{align:"center",children:new Date(e.date).toLocaleDateString("en-GB")}),Object(B.jsxs)(A.a,{align:"center",children:[e.fname," ",e.lname]}),Object(B.jsx)(A.a,{align:"center",children:new Date(e.checkInTime).toLocaleTimeString("en-GB")}),Object(B.jsx)(A.a,{align:"center",children:e.checkOut?Object(B.jsxs)(B.Fragment,{children:[" ",new Date(e.checkOut).toLocaleTimeString("en-GB")]}):Object(B.jsx)(B.Fragment,{children:"-"})}),Object(B.jsx)(A.a,{align:"center",children:0==e.attendence?Object(B.jsx)(w.a,{label:"Absent",color:"error"}):1==e.attendence?Object(B.jsx)(w.a,{label:"Present",color:"success"}):2==e.attendence?Object(B.jsx)(w.a,{label:"Half-Day",color:"warning"}):3==e.attendence?Object(B.jsx)(w.a,{label:"Late Mark"}):Object(B.jsx)(w.a,{label:"Leave"})}),Object(B.jsx)(A.a,{align:"center",children:"Verified"==e.isApproved?Object(B.jsx)(w.a,{label:"Verified",color:"success"}):Object(B.jsx)(w.a,{label:"Waiting",color:"warning"})}),Object(B.jsx)(A.a,{align:"center",children:0==e.disableLogout?Object(B.jsx)(I.a,{style:{color:"red"},onClick:function(){return l(e),void v(!0)},children:Object(B.jsx)(y.a,{})}):Object(B.jsx)(I.a,{style:{color:"green"},children:Object(B.jsx)(f.a,{})})})]},t)}))})]})]})]}),Object(B.jsxs)(m.a,{backdrop:"static",keyboard:!1,show:M,onHide:q,animation:!1,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(B.jsxs)(m.a.Header,{children:[Object(B.jsx)("h5",{children:"Welcome Back,Let Start You'r Day"}),Object(B.jsx)(I.a,{type:"button",onClick:q,children:Object(B.jsx)(x.a,{})})]}),Object(B.jsx)(m.a.Body,{children:Object(B.jsx)(T,{handleClose:q})})]}),Object(B.jsxs)(m.a,{backdrop:"static",keyboard:!1,show:p,onHide:k,animation:!1,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(B.jsxs)(m.a.Header,{children:[Object(B.jsx)("h5",{children:"It's Time to say Good Bye"}),Object(B.jsx)(I.a,{type:"button",onClick:k,children:Object(B.jsx)(x.a,{})})]}),Object(B.jsx)(m.a.Body,{children:Object(B.jsx)(H,{thelogoutData:i,handleClose:k})})]})]})}},863:function(e,t,a){"use strict";var n=a(302);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(a(303)),r=a(2),i=(0,c.default)((0,r.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"}),"Logout");t.default=i},864:function(e,t,a){"use strict";var n=a(302);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(a(303)),r=a(2),i=(0,c.default)((0,r.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done");t.default=i}}]);
//# sourceMappingURL=69.719b3b95.chunk.js.map